{% extends "base.twig" %}

{% block title %}Toppage{% endblock %}
{% block contents %}
    <div class="message">
        {% if saved %}
            <li>{{ saved }}</li>
        {% endif %}
        {% if deleted %}
            <li>{{ deleted }}</li>
        {% endif %}
        {% if account %}
            <li>{{ account }}</li>
        {% endif %}
    </div>
    <div class="create-thread">
        <h2>スレッドを作る</h2>
        <form action="{{ path_for('home') }}" method="post">
            <label>コメント：<input type="text" name="comment"></label>
            <input type="hidden" name="{{ nameKey }}" value="{{ name }}">
            <input type="hidden" name="{{ valueKey }}" value="{{ value }}">
            <input type="hidden" name="user_id" value="{{ user_id }}">
            <input type="submit" value="作成" class="button">
        </form>
    </div>
    <div class="search column">
        {% if threads %}
            <h2 class="search__title">コメントを探す</h2>
            <form action="{{ path_for('search') }}" method="get" class="form--inline">
                <label for="query" class="hidden">検索するコメント</label><input type="text" name="query" class="search__query">
                <input type="submit" value="検索" class="button search__button">
            </form>
        {% endif %}
    </div>
    <article class="threads">
        <h2>スレッド一覧</h2>
        {% if threads %}
            {% for thread in threads %}
                <section class="thread">
                    <a href="{{ path_for('thread', {}, {'thread_id': thread.thread_id}) }}">
                        {% if thread.comment %}{{ thread.comment }}{% else %}[削除済み]{% endif %}
                    </a> {{ thread.created_at }}
                </section>
            {% endfor %}
        {% else %}
            <p>スレッドはまだありません。</p>
        {% endif %}
    </article>
    {% if loggedIn %}
        <hr>
        <nav class="float-left">
            <a href="{{ path_for('quit') }}">退会する</a>
        </nav>
    {% endif %}
{% endblock %}